# Lion Mastra - Multi-Agent Activity Planning System

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€[Mastra](https://mastra.ai/)ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã—ã¦æ§‹ç¯‰ã•ã‚ŒãŸãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚å¤©æ°—æƒ…å ±ã¨ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚’çµ„ã¿åˆã‚ã›ãŸã€ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆãªæ´»å‹•è¨ˆç”»æ”¯æ´ã‚·ã‚¹ãƒ†ãƒ ã‚’æä¾›ã—ã¾ã™ã€‚

## ğŸŒŸ ç‰¹å¾´

### ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **AgentNetwork**: LLMãƒ™ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§è¤‡æ•°ã®å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å”èª¿ã•ã›ã‚‹
- **å‹•çš„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé¸æŠ**: ã‚¿ã‚¹ã‚¯ã®å†…å®¹ã«å¿œã˜ã¦æœ€é©ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’è‡ªå‹•é¸æŠ
- **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå…±æœ‰**: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã§ã®æƒ…å ±å…±æœ‰ã¨ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªé€£æº

### å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

#### ğŸŒ¤ï¸ Weather & Task Management Agent
- å¤©æ°—æƒ…å ±ã®å–å¾—ã¨åˆ†æ
- å ´æ‰€ãƒ™ãƒ¼ã‚¹ã®ã‚¿ã‚¹ã‚¯ç®¡ç†
- å¤©æ°—ã‚’è€ƒæ…®ã—ãŸã‚¿ã‚¹ã‚¯åˆ†å‰²
- Open-Meteo APIã‚’ä½¿ç”¨ã—ãŸæ­£ç¢ºãªå¤©æ°—äºˆå ±

#### ğŸ“‹ Planning Specialist Agent  
- åŒ…æ‹¬çš„ãªè¨ˆç”»ç«‹æ¡ˆ
- æ—…è¡Œãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨ˆç”»
- æ§‹é€ åŒ–ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯åˆ†è§£
- ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ã¨æœ€é©åŒ–

## ğŸš€ ä½¿ç”¨æŠ€è¡“

- **Mastra Framework**: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ç®¡ç†
- **Gemini 2.5 Flash Preview**: æœ€æ–°ã®Google AIè¨€èªãƒ¢ãƒ‡ãƒ«
- **Open-Meteo API**: å¤©æ°—æƒ…å ±ã®å–å¾—
- **LibSQL**: ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
- **TypeScript**: å‹å®‰å…¨ãªé–‹ç™º

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
src/
â”œâ”€â”€ mastra/
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ weather-agent.ts      # å¤©æ°—ãƒ»ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ planning-agent.ts     # è¨ˆç”»å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ networks/
â”‚   â”‚   â””â”€â”€ activity-network.ts   # ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”œâ”€â”€ weather-tool.ts       # å¤©æ°—æƒ…å ±å–å¾—ãƒ„ãƒ¼ãƒ«
â”‚   â”‚   â””â”€â”€ task-tool.ts          # ã‚¿ã‚¹ã‚¯ç®¡ç†ãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ workflows/
â”‚   â”‚   â””â”€â”€ weather-workflow.ts   # å¤©æ°—ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
â”‚   â””â”€â”€ index.ts                  # ãƒ¡ã‚¤ãƒ³ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”œâ”€â”€ examples/
â”‚   â””â”€â”€ multi-agent-example.ts    # ä½¿ç”¨ä¾‹
â””â”€â”€ ...
```

## ğŸ› ï¸ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

1. **ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
   ```bash
   npm install
   ```

2. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**
   ```bash
   # Google AI API ã‚­ãƒ¼ã‚’è¨­å®š
   export GOOGLE_GENERATIVE_AI_API_KEY="your-api-key"
   ```

3. **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•**
   ```bash
   npm run dev
   ```

## ğŸ’¡ ä½¿ç”¨ä¾‹

### åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•

```typescript
import { activityNetwork } from './src/mastra/networks/activity-network';

// å¤©æ°—ã«é–¢ã™ã‚‹è³ªå•ï¼ˆWeather Agentã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼‰
const weatherResult = await activityNetwork.generate(
  "ä»Šæ—¥ã®æ±äº¬ã®å¤©æ°—ã¯ã©ã†ã§ã™ã‹ï¼Ÿ"
);

// è¨ˆç”»ã«é–¢ã™ã‚‹è³ªå•ï¼ˆPlanning Agentã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼‰
const planningResult = await activityNetwork.generate(
  "æ¥æœˆã®ä¼šç¤¾ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä¼ç”»ã—ã¦ãã ã•ã„"
);

// è¤‡åˆçš„ãªè³ªå•ï¼ˆä¸¡æ–¹ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½¿ç”¨ï¼‰
const complexResult = await activityNetwork.generate(
  "æ¥é€±æœ«ã®äº¬éƒ½æ—…è¡Œã‚’å¤©æ°—ã‚’è€ƒæ…®ã—ã¦è¨ˆç”»ã—ã¦ãã ã•ã„"
);
```

### ãƒ‡ãƒ¢ã®å®Ÿè¡Œ

```bash
npx ts-node src/examples/multi-agent-example.ts
```

## ğŸ¯ ä¸»ãªæ©Ÿèƒ½

### 1. ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•å†…å®¹ã‚’åˆ†æ
- æœ€é©ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’è‡ªå‹•é¸æŠ
- å¿…è¦ã«å¿œã˜ã¦è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’é€£æº

### 2. å¤©æ°—è€ƒæ…®å‹ã‚¿ã‚¹ã‚¯ç®¡ç†
- å ´æ‰€ãƒ™ãƒ¼ã‚¹ã®ã‚¿ã‚¹ã‚¯ã«å¤©æ°—æƒ…å ±ã‚’è‡ªå‹•çµ±åˆ
- å¤©æ°—ã«å¿œã˜ãŸã‚¿ã‚¹ã‚¯åˆ†å‰²
- é©åˆ‡ãªæº–å‚™é …ç›®ã®ææ¡ˆ

### 3. æ§‹é€ åŒ–ã•ã‚ŒãŸè¨ˆç”»ç«‹æ¡ˆ
- æ®µéšçš„ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ†è§£
- å„ªå…ˆåº¦ã¨ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®è¨­å®š
- ãƒªã‚½ãƒ¼ã‚¹è¦ä»¶ã®è€ƒæ…®

### 4. å‹•æ©Ÿä»˜ã‘ã¨ã‚µãƒãƒ¼ãƒˆ
- ã‚¿ã‚¹ã‚¯å®Œäº†ã¸ã®åŠ±ã¾ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- å®Ÿè¡Œå¯èƒ½ãªå…·ä½“çš„ã‚¢ãƒ‰ãƒã‚¤ã‚¹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆã®å‘ä¸Š

## ğŸ”§ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### æ–°ã—ã„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è¿½åŠ 

```typescript
import { Agent } from '@mastra/core/agent';
import { google } from '@ai-sdk/google';

const newAgent = new Agent({
  name: 'New Specialist Agent',
  instructions: 'Your specialized instructions...',
  model: google('gemini-2.5-flash-preview-05-20'),
  tools: { /* your tools */ },
});

// ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«è¿½åŠ 
const expandedNetwork = new AgentNetwork({
  // ... existing config
  agents: [weatherAgent, planningAgent, newAgent],
});
```

### ãƒ„ãƒ¼ãƒ«ã®æ‹¡å¼µ

```typescript
import { createTool } from '@mastra/core/tools';

const customTool = createTool({
  id: 'custom-tool',
  description: 'Custom functionality',
  inputSchema: z.object({
    // your schema
  }),
  outputSchema: z.object({
    // your schema  
  }),
  execute: async ({ input }) => {
    // your implementation
  },
});
```

## ğŸ“š å‚è€ƒè³‡æ–™

- [Mastra Documentation](https://mastra.ai/docs)
- [AgentNetwork Reference](https://mastra.ai/docs/reference/networks/agent-network)
- [Open-Meteo API](https://open-meteo.com/)
- [Google AI Gemini](https://ai.google.dev/)

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚„ã‚¤ã‚·ãƒ¥ãƒ¼ã®å ±å‘Šã‚’æ­“è¿ã—ã¾ã™ã€‚æ–°æ©Ÿèƒ½ã®ææ¡ˆã‚„æ”¹å–„æ¡ˆãŒã‚ã‚Šã¾ã—ãŸã‚‰ã€ãŠæ°—è»½ã«ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚ 